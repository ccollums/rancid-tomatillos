(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{19:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){},23:function(e,t,s){},24:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){"use strict";s.r(t);var i=s(1),n=s.n(i),a=s(12),c=s.n(a),o=(s(19),s(5)),r=s(6),l=s(8),h=s(7),d=s(2),m=(s(20),s(21),s(0)),j=function(e){var t=e.image,s=e.title;return Object(m.jsx)("section",{className:"card",children:Object(m.jsx)("img",{className:"movie-poster",src:t,alt:s})})},u=s(4),b=s.p+"static/media/tomatos2.2ea14990.svg",v=s.p+"static/media/grey-magnify-glass.c4526319.svg",p=s(13),f=(s(23),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).handleChange=function(e){i.setState(Object(p.a)({},e.target.name,e.target.value),(function(){i.props.searchMovies(i.state.title),i.state.title||(i.props.searchMovies(),i.props.componentDidMount())}))},i.state={title:""},i}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsx)("form",{children:Object(m.jsx)("input",{type:"text",placeholder:"Search Movie Title",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})})}}]),s}(i.Component)),g=function(e){var t=e.movies,s=e.searchMovies,i=e.componentDidMount,n=t.sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object(m.jsx)(u.b,{to:"/".concat(e.id),children:Object(m.jsx)(j,{id:e.id,title:e.title,image:e.poster_path})},e.id)}));return Object(m.jsxs)("section",{children:[Object(m.jsxs)("section",{className:"header",children:[Object(m.jsxs)("section",{className:"logo-title",children:[Object(m.jsx)("img",{className:"logo",src:b,alt:"logo",onClick:i}),Object(m.jsx)("h1",{className:"title",onClick:i,children:"Rancid Tomatillos"})]}),Object(m.jsxs)("section",{className:"form",children:[Object(m.jsx)("img",{className:"magnify-glass",src:v}),Object(m.jsx)(f,{searchMovies:s,componentDidMount:i})]})]}),Object(m.jsx)("section",{className:"movies-container",children:n})]})},O=(s(24),s.p+"static/media/x-icon.38e802c2.svg"),x=s.p+"static/media/play-button.afc40ca5.svg",N=s.p+"static/media/error-cloud-icon.ea2338b7.svg",y=s.p+"static/media/loading-icon.9a69326d.svg",M=s(14),k=s.n(M),T=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).componentDidMount=function(){var e;(e=i.props.urlId,fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e))).then((function(e){if(e.ok)return e.json();this.setState({error:!0,loading:!1})})).then((function(e){return i.setState({movie:e.movie,loading:!1})})).catch((function(e){return i.handleError(e)}))},i.componentDidUpdate=function(){i.state.videos.length>0&&i.myRef.current.scrollIntoView({behavior:"smooth"})},i.componentWillUnmount=function(){i.setState({videos:[]})},i.playTrailer=function(e){(function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e,"/videos")).then((function(e){return e.json()}))})(e).then((function(e){return i.setState({videos:e.videos})})).catch((function(e){return i.handleError(e)}))},i.handleError=function(e){i.setState({error:!0,loading:!1})},i.findMovieTrailer=function(){return i.state.videos.find((function(e){return"Trailer"===e.type})).key},i.myRef=n.a.createRef(),i.state={movie:{},loading:!0,error:!1,videos:[]},i}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("section",{className:"details-page",children:[this.state.loading&&Object(m.jsx)("section",{className:"loading",children:Object(m.jsx)("img",{className:"loading-circle",src:y,alt:"a spinning loading circle"})}),this.state.error&&!this.state.loading&&Object(m.jsxs)("section",{className:"error",children:[Object(m.jsx)("img",{className:"sad-cloud",src:N,alt:"a sad cloud because there is an error"}),Object(m.jsx)("h2",{className:"error-message",children:"Oops, something went wrong. Page not found!"})]}),!this.state.loading&&!this.state.error&&Object(m.jsxs)("section",{className:"image-section",children:[Object(m.jsx)("section",{className:"fade",children:Object(m.jsx)("img",{className:"backdrop-image",src:this.state.movie.backdrop_path,alt:this.state.movie.title})}),Object(m.jsx)(u.b,{to:"/",children:Object(m.jsx)("section",{className:"x-location",children:Object(m.jsx)("img",{className:"x-icon",src:O,alt:"x icon, click to go back to home page",onClick:function(){e.props.backToMain()}})})}),Object(m.jsxs)("section",{className:"overlay",children:[Object(m.jsxs)("section",{className:"left-side-overlay",children:[Object(m.jsx)("h1",{className:"movie-title",children:this.state.movie.title}),Object(m.jsxs)("section",{className:"movie-details",children:[Object(m.jsxs)("h4",{children:[this.state.movie.runtime," min "]}),this.state.movie.genres.map((function(e){return Object(m.jsx)("h4",{children:e},e)}))]}),Object(m.jsxs)("section",{className:"trailer",children:[Object(m.jsx)("img",{className:"play-button",src:x,alt:"clickable play button to watch trailer",onClick:function(){e.playTrailer(e.state.movie.id)}}),Object(m.jsx)("h2",{children:"Watch Trailer"})]})]}),Object(m.jsx)("section",{className:"rating-section",children:Object(m.jsxs)("h1",{className:"rating",children:[Math.round(this.state.movie.average_rating),"/10"]})})]})]}),!this.state.loading&&!this.state.error&&Object(m.jsxs)("section",{className:"overview-section",children:[Object(m.jsx)("h2",{children:this.state.movie.tagline}),Object(m.jsx)("p",{children:this.state.movie.overview}),Object(m.jsxs)("section",{className:"bottom-details",children:[Object(m.jsxs)("h4",{children:["Release Date: ",k()(this.state.movie.release_date).format("MM-DD-YYYY")]}),Object(m.jsxs)("h4",{children:["Budget: ","$"+this.state.movie.budget.toLocaleString()]}),Object(m.jsxs)("h4",{children:["Revenue: ","$"+this.state.movie.revenue.toLocaleString()]})]})]}),this.state.videos.length>0&&Object(m.jsx)("section",{className:"trailer-location",children:Object(m.jsx)("iframe",{ref:this.myRef,src:"https://www.youtube.com/embed/".concat(this.findMovieTrailer()),frameBorder:"",allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"video",width:960,height:544})})]})}}]),s}(i.Component),w=function(e){e.videos;var t=e.backToMain,s=e.playTrailer,i=Object(d.g)().movieId;return Object(m.jsx)(T,{backToMain:t,playTrailer:s,urlId:i})},S=(s(26),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).componentDidMount=function(){fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(e){return e.json()})).then((function(t){return e.setState({movies:t.movies})})).catch((function(t){return e.handleError(t)}))},e.backToMain=function(){e.setState({videos:[],error:!1})},e.handleError=function(t){e.setState({error:!0})},e.searchMovies=function(t){var s=e.state.movies.filter((function(e){return e.title.toLowerCase().includes(t)||e.title.includes(t)}));e.setState({movies:s})},e.state={movies:[],error:!1},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("main",{className:"App",children:[this.state.error&&Object(m.jsxs)("section",{className:"error",children:[Object(m.jsx)("img",{className:"sad-cloud",src:N,alt:"a sad cloud because there is an error"}),Object(m.jsx)("h2",{className:"error-message",children:"Oops, something went wrong. Please refresh your page!"})]}),Object(m.jsxs)(d.c,{children:[!this.state.error&&Object(m.jsx)(d.a,{path:"/",element:Object(m.jsx)(g,{movies:this.state.movies,searchMovies:this.searchMovies,componentDidMount:this.componentDidMount})}),Object(m.jsx)(d.a,{path:"/:movieId",element:Object(m.jsx)(w,{backToMain:this.backToMain,playTrailer:this.playTrailer,videos:this.state.videos})})]})]})}}]),s}(i.Component)),C=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,28)).then((function(t){var s=t.getCLS,i=t.getFID,n=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),i(e),n(e),a(e),c(e)}))};c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(S,{})})}),document.getElementById("root")),C()}},[[27,1,2]]]);
//# sourceMappingURL=main.65e08612.chunk.js.map